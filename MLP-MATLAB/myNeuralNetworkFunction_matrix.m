function [y1] = myNeuralNetworkFunction_matrix(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Auto-generated by MATLAB, 24-May-2021 20:48:07.
%
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = Qx9 matrix, input #1
% and returns:
%   y = Qx1 matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [0;0;0;0;0;0;0.078;21;0];
x1_step1.gain = [0.117647058823529;0.0100502512562814;0.0163934426229508;0.0202020202020202;0.00236406619385343;0.029806259314456;0.85397096498719;0.0333333333333333;2];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.8220475717229367429;-1.5065588061295480671;-1.220972017565386647;0.63126882521570093498;-0.085749600368899947522;-0.15924177541557663074;-0.62729801175271149294;-0.6350851566894917255;-1.0438299780233728509;2.4114217987700676815];
IW1_1 = [0.35175679155135702869 -0.3765929550975036233 -0.85443385462100884808 -0.57562248183602460205 0.61536557512914569212 -0.069207579574737762562 0.37484294470579765379 1.1739853633447152603 -0.19602496750078157728;0.51773293883378213032 0.18468028942679626248 -0.75800587437469535423 0.31051666796270360749 -0.17125248015920241373 -1.0291994242223438949 0.47979400601017430095 -0.82354268797690055592 -0.35552678413200683449;0.77764313323573275305 -0.87083070833372755448 -0.70673796690349477423 0.042260637759333349872 0.35656999188925869726 -0.47230086204488685997 0.81267260258968665454 -0.071565560238089603873 0.58122808972535167094;-0.47722521803510498106 0.56962721919160463901 0.73587883888290106515 -0.3214411390115512468 -0.90711926421136801491 -0.71935852360867325039 -0.1128612636969182903 -0.84677761415202446038 0.033845958140348617049;0.14748235169915477338 -0.074666304143463035903 -0.33993360295278618466 0.54830203982532932372 -0.66890632101504865492 0.56181241039409868243 -0.52327408623904958507 0.57845363785975811854 2.2808676055102350411;0.42035257461847824745 -0.24650007633555459652 0.54478148736455966894 0.26425234676294617753 0.24784657472487553465 -0.50621568156369589619 -0.43488632392383136382 -0.82099091531927415044 -2.2607013472062864601;-0.77011354023423195247 0.48651078223457266958 -0.593077870503686988 0.14761956270212531206 0.68528621081453489072 0.082277678378626623035 1.003211967762022816 0.65507794758001935964 -0.38181837001044610647;-0.73618406292800486757 0.42652365130354463751 0.59477588944747461497 0.32730150691154819009 0.26405059348071041603 -0.61534710578557749727 -0.79453335312397288526 0.19952634757882553584 -1.8374289706545783307;-0.25521442742313904528 0.67795519261231351749 -0.2369349713212258457 -0.5557342143464935047 -0.9847873149079162669 0.095141149494770385631 0.32603645752038185046 0.37616548360613621949 -2.5479095392561466049;0.58442001093705375769 0.15694314282749410872 -0.54282326519777113205 0.1638903718445658686 -0.36545043021185424914 -0.55426655129297430769 -0.35545282727984883753 -1.2650047612769332872 0.12630632580422018751];

% Layer 2
b2 = -0.3367947789228461497;
LW2_1 = [0.62078437716384082812 -0.086592412357648293475 -0.82423186239625456651 0.96541377134126504789 4.0673560615999875267 -4.3763393436947293225 0.14099156347513860932 -2.3881256553692589151 -4.251710118440119146 -0.82739453346320468441];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,1); % samples

% Input 1
x1 = x1';
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = logsig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Output 1
y1 = a2;
y1 = y1';
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
y = bsxfun(@minus,x,settings.xoffset);
y = bsxfun(@times,y,settings.gain);
y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Positive Transfer Function
function a = logsig_apply(n,~)
a = 1 ./ (1 + exp(-n));
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
a = 2 ./ (1 + exp(-2*n)) - 1;
end
